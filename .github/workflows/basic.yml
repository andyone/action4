name: ACTION

on:
  push:
    branches: [master, develop]
  pull_request:
    branches: [master]
  workflow_dispatch:
    inputs:
      force_rebuild:
        description: 'Force'
        required: true
        type: choice
        options: [yes, no]

jobs:
  Notify:
    name: Notify
    runs-on: ubuntu-latest

    environment: Devel

    steps:
      - name: View github context
        run: echo "${{ toJson(github) }}"

      - name: Show notification to Pachca
        uses: andyone/pachca-action@master
        with:
          webhook: ${{secrets.PACHCA_WEBHOOK}}
          timezone: "Europe/Moscow"
          title: "Deploying backend"
          message: "Building docker image and deploying it to AWS"
          type: "fail"
